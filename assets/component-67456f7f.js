import{g as P,M as oe,_ as le}from"./index-e4d67d33.js";import{d as b,b as v,m as te,E as g}from"./element-plus-990c01d8.js";import{_ as ne}from"./index.vue_vue_type_style_index_0_lang-5c717ad5.js";import{a as de,r as E}from"./requestUtil-9787c5ea.js";import{H as ae,c as ie,a as N,_ as w,d as se,ah as u,m as re,p as y,V as n,P as e,u as o,F as ce,l as m,U as ue,O as _,T as a,S as k}from"./vue-5a70a57f.js";import"./index.vue_vue_type_style_index_0_lang-56cd8ea7.js";const me={class:"box-editor-chart box-lowcode-app"},pe=["onClick"],fe={class:"context-menu"},_e={class:"el-dropdown-link"},ke={class:"dialog-footer"},ge={class:"dialog-footer"},ye=ae({__name:"component",setup(be){const I=ie().proxy;I.$router,I.$route;const M=de();N();const c=w({defaultProps:{children:"children",label:"name"},data:M.thatOption.data,selectedNode:null,defaultExpandIds:[]}),T=t=>{c.selectedNode=t,t.kind_type==2},H=t=>{g.success("删除成功")},j=t=>{let l=!1;c.defaultExpandIds.some(p=>{if(p===t.id)return l=!0,!0}),l||c.defaultExpandIds.push(t.id)},G=t=>{c.defaultExpandIds.some((l,p)=>{l===t.id&&c.defaultExpandIds.splice(p,1)}),D(t)},D=t=>{t.children&&t.children.forEach(function(l){const p=c.defaultExpandIds.indexOf(l.id);p>0&&c.defaultExpandIds.splice(p,1),D(l)})},J=(t,l)=>{switch(t){case"newdir":h(null);break;case"renamedir":h(l);break;case"deletedir":K();break;case"new":O(null);break;case"edit":R(l);break;case"rename":O(l);break;case"delete":H();break;case"copyurl":g.success("拷贝地址成功");break;case"qrcode":g.success("二维码地址生成");break}},x=async()=>{const t=await E.request("/admin/lowcode/component","post",{});c.data=t.data.list||[]};se(()=>{x()});const F=N(),d=w({dialog:{visible:!1,title:"新建目录"},form:{},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}]}}),h=(t=null,l=!1)=>{d.dialog.visible=!0,d.form={},t?(d.dialog.title="重命名",d.form=t):(d.dialog.title="新建目录",l?d.form={kind_type:1}:d.form={kind_type:1,parent_id:c.selectedNode.id})},K=t=>{g.success("删除成功")},L=()=>{F.value.validate(async t=>{if(t){const l=await E.request("/admin/lowcode/component/create","post",d.form);if(l.code!=0){g.error(l.msg);return}x(),g.success("保存成功"),d.dialog.visible=!1}else return console.log("error submit!"),!1})},q=N(),i=w({dialog:{visible:!1,title:"新建应用"},form:{},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}]}}),O=(t=null)=>{i.dialog.visible=!0,i.form={},t?(i.dialog.title="重命名",i.form=t):(i.dialog.title="新建应用",i.form={kind_type:2,parent_id:c.selectedNode.id})},Q=()=>{q.value.validate(async t=>{if(t){const l=await E.request("/admin/lowcode/component/create","post",i.form);if(l.code!=0){g.error(l.msg);return}x(),g.success("保存成功"),i.dialog.visible=!1}else return console.log("error submit!"),!1})},V=w({dialog:{visible:!1,title:"可视化"}}),R=(t=null)=>{V.dialog.visible=!0};return(t,l)=>{const p=u("el-button"),C=u("el-input"),U=u("el-col"),$=u("el-row"),W=u("el-icon"),f=u("el-dropdown-item"),X=u("el-dropdown-menu"),Y=u("el-dropdown"),Z=u("el-tree"),A=u("el-form-item"),z=u("el-form"),S=u("el-dialog"),ee=u("el-drawer");return m(),re(ce,null,[y("div",me,[n(o(oe),{class:"default-theme"},{default:e(()=>[n(o(P),{"min-size":"10",size:"20","max-size":"30"},{default:e(()=>[n($,null,{default:e(()=>[n(U,null,{default:e(()=>[n(C,{placeholder:"输入关键词进行搜索"},{append:e(()=>[n(p,{icon:"Plus",onClick:l[0]||(l[0]=s=>h(null,!0))})]),_:1})]),_:1})]),_:1}),n($,null,{default:e(()=>[n(U,null,{default:e(()=>[n(Z,{data:o(c).data,props:o(c).defaultProps,"expand-on-click-node":!1,"node-key":"id","highlight-current":"","default-expanded-keys":o(c).defaultExpandIds,onNodeExpand:j,onNodeCollapse:G,"default-expand-all":""},{default:e(({node:s,data:r})=>[y("span",{style:{width:"100%"},class:"custom-tree-node",onClick:B=>T(r)},[y("span",null,ue(s.label),1),y("span",fe,[n(Y,{trigger:"click",onCommand:B=>J(B,r)},{dropdown:e(()=>[n(X,null,{default:e(()=>[r.kind_type==1?(m(),_(f,{key:0,icon:o(b),command:"newdir"},{default:e(()=>[a("新建目录")]),_:1},8,["icon"])):k("",!0),r.kind_type==1?(m(),_(f,{key:1,icon:o(b),command:"renamedir"},{default:e(()=>[a("重命名目录")]),_:1},8,["icon"])):k("",!0),r.kind_type==1?(m(),_(f,{key:2,icon:o(b),command:"deletedir"},{default:e(()=>[a("删除目录")]),_:1},8,["icon"])):k("",!0),r.kind_type==1?(m(),_(f,{key:3,icon:o(b),command:"deletedir"},{default:e(()=>[a("复制链接目录")]),_:1},8,["icon"])):k("",!0),r.kind_type==1?(m(),_(f,{key:4,icon:o(b),command:"new",divided:""},{default:e(()=>[a("新建")]),_:1},8,["icon"])):k("",!0),r.kind_type==2?(m(),_(f,{key:5,icon:o(b),command:"edit"},{default:e(()=>[a("编辑")]),_:1},8,["icon"])):k("",!0),r.kind_type==2?(m(),_(f,{key:6,icon:o(v),command:"copy"},{default:e(()=>[a("复制")]),_:1},8,["icon"])):k("",!0),r.kind_type==2?(m(),_(f,{key:7,icon:o(v),command:"move"},{default:e(()=>[a("移动到")]),_:1},8,["icon"])):k("",!0),r.kind_type==2?(m(),_(f,{key:8,icon:o(v),command:"rename"},{default:e(()=>[a("重命名")]),_:1},8,["icon"])):k("",!0),r.kind_type==2?(m(),_(f,{key:9,icon:o(v),command:"delete"},{default:e(()=>[a("删除")]),_:1},8,["icon"])):k("",!0),r.kind_type==2?(m(),_(f,{key:10,icon:o(v),command:"copyurl",divided:""},{default:e(()=>[a("复制链接")]),_:1},8,["icon"])):k("",!0),r.kind_type==2?(m(),_(f,{key:11,icon:o(v),command:"qrcode"},{default:e(()=>[a("二维码")]),_:1},8,["icon"])):k("",!0)]),_:2},1024)]),default:e(()=>[y("span",_e,[n(W,{size:15},{default:e(()=>[n(o(te))]),_:1})])]),_:2},1032,["onCommand"])])],8,pe)]),_:1},8,["data","props","default-expanded-keys"])]),_:1})]),_:1})]),_:1}),n(o(P),null,{default:e(()=>[a(" 组件库 ")]),_:1})]),_:1})]),n(S,{modelValue:o(d).dialog.visible,"onUpdate:modelValue":l[3]||(l[3]=s=>o(d).dialog.visible=s),title:o(d).dialog.title,width:"30%",draggable:"","append-to-body":""},{footer:e(()=>[y("span",ke,[n(p,{onClick:l[2]||(l[2]=s=>o(d).dialog.visible=!1)},{default:e(()=>[a("取消")]),_:1}),n(p,{type:"primary",onClick:L},{default:e(()=>[a(" 确定 ")]),_:1})])]),default:e(()=>[n(z,{ref_key:"refDirForm",ref:F,model:o(d).form,"label-width":"120px",rules:o(d).rules},{default:e(()=>[n(A,{label:"目录名称",prop:"name"},{default:e(()=>[n(C,{modelValue:o(d).form.name,"onUpdate:modelValue":l[1]||(l[1]=s=>o(d).form.name=s)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]),n(S,{modelValue:o(i).dialog.visible,"onUpdate:modelValue":l[6]||(l[6]=s=>o(i).dialog.visible=s),title:o(i).dialog.title,width:"30%",draggable:"","append-to-body":""},{footer:e(()=>[y("span",ge,[n(p,{onClick:l[5]||(l[5]=s=>o(i).dialog.visible=!1)},{default:e(()=>[a("取消")]),_:1}),n(p,{type:"primary",onClick:Q},{default:e(()=>[a(" 确定 ")]),_:1})])]),default:e(()=>[n(z,{ref_key:"refAppForm",ref:q,model:o(i).form,"label-width":"120px",rules:o(i).rules},{default:e(()=>[n(A,{label:"应用名称",prop:"name"},{default:e(()=>[n(C,{modelValue:o(i).form.name,"onUpdate:modelValue":l[4]||(l[4]=s=>o(i).form.name=s)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]),n(ee,{modelValue:o(V).dialog.visible,"onUpdate:modelValue":l[7]||(l[7]=s=>o(V).dialog.visible=s),title:"visualOption.dialog.title","with-header":!1,size:"100%","append-to-body":""},{default:e(()=>[n(ne)]),_:1},8,["modelValue"])],64)}}});const Ee=le(ye,[["__scopeId","data-v-91e03051"]]);export{Ee as default};
