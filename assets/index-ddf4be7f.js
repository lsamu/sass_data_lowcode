import{g as H,M as ie,_ as se}from"./index-c0bda069.js";import{f as b,d as v,m as L,E as y}from"./element-plus-5c7ed646.js";import{_ as re}from"./index.vue_vue_type_style_index_0_lang-eacb05f6.js";import{a as ce,r as I}from"./requestUtil-67d2c00e.js";import{H as ue,c as me,a as D,_ as h,d as pe,ah as u,m as j,p as k,V as o,P as e,u as l,F as G,l as m,U as J,O as _,T as d,S as g,a8 as fe}from"./vue-13df00ad.js";import"./lodash-d0917acf.js";import"./pinia-dae2701a.js";import"./Sortable-9c3c89c5.js";import"./vue-echarts-cbdab051.js";import"./echarts-00088db9.js";import"./index.vue_vue_type_style_index_0_lang-bb526a1f.js";const _e={class:"box-editor-chart box-lowcode-app"},ge=["onClick"],ke={class:"context-menu"},ye={class:"el-dropdown-link"},be={style:{padding:"14px"}},ve={style:{float:"right"}},he={class:"el-dropdown-link"},we={class:"dialog-footer"},xe={class:"dialog-footer"},Ve=ue({__name:"index",setup(Ce){const F=me().proxy;F.$router,F.$route;const K=ce();D();const p=h({defaultProps:{children:"children",label:"name"},data:K.thatOption.data,selectedNode:null,defaultExpandIds:[]}),Q=n=>{p.selectedNode=n,n.kind_type==2},R=n=>{y.success("删除成功")},W=n=>{let t=!1;p.defaultExpandIds.some(f=>{if(f===n.id)return t=!0,!0}),t||p.defaultExpandIds.push(n.id)},X=n=>{p.defaultExpandIds.some((t,f)=>{t===n.id&&p.defaultExpandIds.splice(f,1)}),q(n)},q=n=>{n.children&&n.children.forEach(function(t){const f=p.defaultExpandIds.indexOf(t.id);f>0&&p.defaultExpandIds.splice(f,1),q(t)})},Y=(n,t)=>{switch(n){case"newdir":x(null);break;case"renamedir":x(t);break;case"deletedir":Z();break;case"new":$(null);break;case"edit":le(t);break;case"rename":$(t);break;case"delete":R();break;case"copyurl":y.success("拷贝地址成功");break;case"qrcode":y.success("二维码地址生成");break}},w=async()=>{const n=await I.request("/admin/lowcode/component","post",{});p.data=n.data.list||[]};pe(()=>{w()});const O=D(),a=h({dialog:{visible:!1,title:"新建目录"},form:{},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}]}}),x=(n=null,t=!1)=>{a.dialog.visible=!0,a.form={},n?(a.dialog.title="重命名",a.form=n):(a.dialog.title="新建目录",t?a.form={kind_type:1}:a.form={kind_type:1,parent_id:p.selectedNode.id})},Z=n=>{y.success("删除成功")},ee=()=>{O.value.validate(async n=>{if(n){const t=await I.request("/admin/lowcode/component/create","post",a.form);if(t.code!=0){y.error(t.msg);return}w(),y.success("保存成功"),a.dialog.visible=!1}else return console.log("error submit!"),!1})},U=D(),i=h({dialog:{visible:!1,title:"新建应用"},form:{},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}]}}),$=(n=null)=>{i.dialog.visible=!0,i.form={},n?(i.dialog.title="重命名",i.form=n):(i.dialog.title="新建应用",i.form={kind_type:2,parent_id:p.selectedNode.id})},oe=()=>{U.value.validate(async n=>{if(n){const t=await I.request("/admin/lowcode/component/create","post",i.form);if(t.code!=0){y.error(t.msg);return}w(),y.success("保存成功"),i.dialog.visible=!1}else return console.log("error submit!"),!1})},V=h({dialog:{visible:!1,title:"可视化"}}),le=(n=null)=>{V.dialog.visible=!0};return(n,t)=>{const f=u("el-button"),C=u("el-input"),E=u("el-col"),N=u("el-row"),z=u("el-icon"),c=u("el-dropdown-item"),A=u("el-dropdown-menu"),S=u("el-dropdown"),te=u("el-tree"),ne=u("el-image"),de=u("el-card"),B=u("el-form-item"),P=u("el-form"),M=u("el-dialog"),ae=u("el-drawer");return m(),j(G,null,[k("div",_e,[o(l(ie),{class:"default-theme"},{default:e(()=>[o(l(H),{"min-size":"10",size:"10","max-size":"30"},{default:e(()=>[o(N,null,{default:e(()=>[o(E,null,{default:e(()=>[o(C,{placeholder:"输入关键词进行搜索"},{append:e(()=>[o(f,{icon:"Plus",onClick:t[0]||(t[0]=s=>x(null,!0))})]),_:1})]),_:1})]),_:1}),o(N,null,{default:e(()=>[o(E,null,{default:e(()=>[o(te,{data:l(p).data,props:l(p).defaultProps,"expand-on-click-node":!1,"node-key":"id","highlight-current":"","default-expanded-keys":l(p).defaultExpandIds,onNodeExpand:W,onNodeCollapse:X,"default-expand-all":""},{default:e(({node:s,data:r})=>[k("span",{style:{width:"100%"},class:"custom-tree-node",onClick:T=>Q(r)},[k("span",null,J(s.label),1),k("span",ke,[o(S,{trigger:"click",onCommand:T=>Y(T,r)},{dropdown:e(()=>[o(A,null,{default:e(()=>[r.kind_type==1?(m(),_(c,{key:0,icon:l(b),command:"newdir"},{default:e(()=>[d("新建目录")]),_:1},8,["icon"])):g("",!0),r.kind_type==1?(m(),_(c,{key:1,icon:l(b),command:"renamedir"},{default:e(()=>[d("重命名目录")]),_:1},8,["icon"])):g("",!0),r.kind_type==1?(m(),_(c,{key:2,icon:l(b),command:"deletedir"},{default:e(()=>[d("删除目录")]),_:1},8,["icon"])):g("",!0),r.kind_type==1?(m(),_(c,{key:3,icon:l(b),command:"deletedir"},{default:e(()=>[d("复制链接目录")]),_:1},8,["icon"])):g("",!0),r.kind_type==1?(m(),_(c,{key:4,icon:l(b),command:"new",divided:""},{default:e(()=>[d("新建")]),_:1},8,["icon"])):g("",!0),r.kind_type==2?(m(),_(c,{key:5,icon:l(b),command:"edit"},{default:e(()=>[d("编辑")]),_:1},8,["icon"])):g("",!0),r.kind_type==2?(m(),_(c,{key:6,icon:l(v),command:"copy"},{default:e(()=>[d("复制")]),_:1},8,["icon"])):g("",!0),r.kind_type==2?(m(),_(c,{key:7,icon:l(v),command:"move"},{default:e(()=>[d("移动到")]),_:1},8,["icon"])):g("",!0),r.kind_type==2?(m(),_(c,{key:8,icon:l(v),command:"rename"},{default:e(()=>[d("重命名")]),_:1},8,["icon"])):g("",!0),r.kind_type==2?(m(),_(c,{key:9,icon:l(v),command:"delete"},{default:e(()=>[d("删除")]),_:1},8,["icon"])):g("",!0),r.kind_type==2?(m(),_(c,{key:10,icon:l(v),command:"copyurl",divided:""},{default:e(()=>[d("复制链接")]),_:1},8,["icon"])):g("",!0),r.kind_type==2?(m(),_(c,{key:11,icon:l(v),command:"qrcode"},{default:e(()=>[d("二维码")]),_:1},8,["icon"])):g("",!0)]),_:2},1024)]),default:e(()=>[k("span",ye,[o(z,{size:15},{default:e(()=>[o(l(L))]),_:1})])]),_:2},1032,["onCommand"])])],8,ge)]),_:1},8,["data","props","default-expanded-keys"])]),_:1})]),_:1})]),_:1}),o(l(H),null,{default:e(()=>[o(N,null,{default:e(()=>[(m(),j(G,null,fe(60,(s,r)=>o(E,{span:6,key:r,class:"box-editor-chart"},{default:e(()=>[o(de,{"body-style":{padding:"0px"},shadow:"hover"},{default:e(()=>[o(ne,{src:"https://shadow.elemecdn.com/app/element/hamburger.9cf7b091-55e9-11e9-a976-7f4d0b07eef6.png",fit:"fit",style:{width:"100%"}}),k("div",be,[k("span",null,J(s),1),k("span",ve,[o(S,{trigger:"click"},{dropdown:e(()=>[o(A,null,{default:e(()=>[o(c,null,{default:e(()=>[d("编辑")]),_:1}),o(c,null,{default:e(()=>[d("复制")]),_:1}),o(c,null,{default:e(()=>[d("删除")]),_:1})]),_:1})]),default:e(()=>[k("span",he,[o(z,{size:15},{default:e(()=>[o(l(L))]),_:1})])]),_:1})])])]),_:2},1024)]),_:2},1024)),64))]),_:1})]),_:1})]),_:1})]),o(M,{modelValue:l(a).dialog.visible,"onUpdate:modelValue":t[3]||(t[3]=s=>l(a).dialog.visible=s),title:l(a).dialog.title,width:"30%",draggable:"","append-to-body":""},{footer:e(()=>[k("span",we,[o(f,{onClick:t[2]||(t[2]=s=>l(a).dialog.visible=!1)},{default:e(()=>[d("取消")]),_:1}),o(f,{type:"primary",onClick:ee},{default:e(()=>[d(" 确定 ")]),_:1})])]),default:e(()=>[o(P,{ref_key:"refDirForm",ref:O,model:l(a).form,"label-width":"120px",rules:l(a).rules},{default:e(()=>[o(B,{label:"目录名称",prop:"name"},{default:e(()=>[o(C,{modelValue:l(a).form.name,"onUpdate:modelValue":t[1]||(t[1]=s=>l(a).form.name=s)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]),o(M,{modelValue:l(i).dialog.visible,"onUpdate:modelValue":t[6]||(t[6]=s=>l(i).dialog.visible=s),title:l(i).dialog.title,width:"30%",draggable:"","append-to-body":""},{footer:e(()=>[k("span",xe,[o(f,{onClick:t[5]||(t[5]=s=>l(i).dialog.visible=!1)},{default:e(()=>[d("取消")]),_:1}),o(f,{type:"primary",onClick:oe},{default:e(()=>[d(" 确定 ")]),_:1})])]),default:e(()=>[o(P,{ref_key:"refAppForm",ref:U,model:l(i).form,"label-width":"120px",rules:l(i).rules},{default:e(()=>[o(B,{label:"应用名称",prop:"name"},{default:e(()=>[o(C,{modelValue:l(i).form.name,"onUpdate:modelValue":t[4]||(t[4]=s=>l(i).form.name=s)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]),o(ae,{modelValue:l(V).dialog.visible,"onUpdate:modelValue":t[7]||(t[7]=s=>l(V).dialog.visible=s),title:"visualOption.dialog.title","with-header":!1,size:"100%","append-to-body":""},{default:e(()=>[o(re)]),_:1},8,["modelValue"])],64)}}});const Se=se(Ve,[["__scopeId","data-v-c8ba3648"]]);export{Se as default};
